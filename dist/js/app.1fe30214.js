(function(e){function t(t){for(var r,i,o=t[0],c=t[1],d=t[2],u=0,p=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/gc/dist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},4678:function(e,t,a){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("gc")],1)},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"demo-app"},[a("div",{attrs:{id:"external-events"}},[e._m(0),e._l(e.orderData,(function(t,r){return a("div",{key:r,staticClass:"fc-event",attrs:{orderId:t.Id,title:t.CaseUserName,expectedMinute:t.ExpectedMinute,orderDetailId:t.Id}},[e._v(e._s(t.CaseUserName))])})),e._m(1)],2),a("div",{staticClass:"demo-app-top"},[e._v(" Start "),a("datetime",{attrs:{type:"datetime"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),a("br"),e._v("End "),a("datetime",{attrs:{type:"datetime"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}}),a("br"),e._v("Title "),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.titleDate,expression:"titleDate"}],attrs:{id:"dateTitle",type:"text"},domProps:{value:e.titleDate},on:{input:function(t){t.target.composing||(e.titleDate=t.target.value)}}}),a("br"),a("button",{on:{click:e.addEvent}},[e._v("送出")])],1),e.despatchDataFilter?a("FullCalendar",{ref:"fullCalendar",staticClass:"demo-app-calendar",attrs:{locale:"zh-tw",defaultView:"resourceTimeGridDay",datesAboveResources:"true",views:this.views,slotDuration:"00:05",minTime:"05:00:00",maxTime:"24:00:00",allDaySlot:this.allDay,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",header:{left:"prev,next today",center:"title",right:"resourceTimeGridDay,resourceTimeGridFourDay"},plugins:e.calendarPlugins,weekends:e.calendarWeekends,editable:this.editable,events:this.despatchDataFilter,resources:this.driverDataFilter},on:{eventRender:e.eventRender,eventDrop:e.eventDrop,drop:e.drop}}):e._e()],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("strong",[e._v("Draggable Events")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("input",{attrs:{type:"checkbox",id:"drop-remove"}}),a("label",{attrs:{for:"drop-remove"}},[e._v("remove after drop")])])}],c=(a("4160"),a("159b"),a("96cf"),a("1da1")),d=a("4990"),l=a("2fc6"),u=a("eb23"),p=a("dc09"),h=a("88e1"),f=a("a7c0"),v=a("19bc"),D=a("859b"),m=a("c1df"),b=a.n(m),g={components:{FullCalendar:p["a"],Datetime:D["Datetime"]},data:function(){return{addDespatchData:{DriverInfoId:"",CarId:"",StartDate:"",DespatchDetail:[{OrderDetailId:""}]},testToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoi5ris6Kmm55SoQuWWruS9jSIsImp0aSI6IjEwODMiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOlsiMzQiLCIzNCJdLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL2V4cGlyYXRpb24iOiIyMDIwLzQvMjEg5LiK5Y2IIDEwOjU1OjE3IiwibmJmIjoxNTg3NDM0MTE3LCJleHAiOjE1ODc0Mzc3MTcsImlzcyI6IkFzby5Db3JlIiwiYXVkIjoid3IifQ.88SNsdG4xrustxva393PtSLERtv2NSJuyq0zSrGe3C8",editable:!1,allDay:!1,orderData:[],despatchData:[],driverData:[],views:{resourceTimeGridFourDay:{type:"resourceTimeGrid",duration:{days:4},buttonText:"4 days"}},date:"",titleDate:"",startDate:"2020-04-15",endDate:"",calendarPlugins:[l["b"],h["g"],f["e"],v["b"],u["a"]],calendarWeekends:!0}},methods:{getDespatch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$http.get("https://ntpcapi.1966.org.tw/api/Despatch/GetAllGroup?CompanyId=97&key=2020-04-21").then((function(e){console.log(e),a.despatchData=e.data.response})).catch((function(e){console.log("getDespatch err")}));case 3:case"end":return t.stop()}}),t)})))()},gerDriverInfo:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$http.get("https://ntpcapi.1966.org.tw/api/Cars/GetCarsWithCarTypeNoPage?compId=97&carType=0&isDescending=false").then((function(e){a.driverData=e.data.response,console.log(e)}));case 3:case"end":return t.stop()}}),t)})))()},getOrder:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r={headers:{Authorization:" Bearer ".concat(a.testToken)}},t.next=4,a.$http.get("https://ntpcapi.1966.org.tw/api/OrderDetails/GeOrderDetailtForDespatch/2020-04-21",r).then((function(e){console.log("getOrder",e),a.orderData=e.data.response}));case 4:case"end":return t.stop()}}),t)})))()},toggleWeekends:function(){this.calendarWeekends=!this.calendarWeekends},gotoPast:function(){var e=this.$refs.fullCalendar.getApi();e.gotoDate("2000-01-01")},drop:function(e){var t=this;t.addDespatchData.DriverInfoId=e.resource.extendedProps.driverId,t.addDespatchData.CarId=e.resource.id,t.addDespatchData.StartDate=e.dateStr,t.addDespatchData.DespatchDetail[0].OrderDetailId=e.draggedEl.attributes.orderDetailId.value;var a=t.addDespatchData;console.log(a);var r={headers:{Authorization:" Bearer ".concat(t.testToken)}};t.$http.post("https://cors-anywhere.herokuapp.com/https://ntpcapi.1966.org.tw/api/Despatch/Post",a,r).then((function(e){console.log(e),t.getOrder()}))},eventDrop:function(e){console.log(e)},goToday:function(){var e=this.$refs.fullCalendar.getApi();e.today()},addEvent:function(){this.calendarEvents.push({title:this.titleDate,start:this.startDate,end:this.endDate})},eventRender:function(e){var t=this;e.el.addEventListener("click",(function(){var a=e.event.extendedProps.orderId;t.deleteDespatch(a),e.event.remove()}))},deleteDespatch:function(e){var t=this,a={headers:{Authorization:" Bearer ".concat(t.testToken)}};t.$http.delete("https://cors-anywhere.herokuapp.com/https://ntpcapi.1966.org.tw/api/Despatch/DeleteSubByODId?OrderDetailID=".concat(e),a).then((function(e){console.log(e),t.getOrder()}))},setupDraggable:function(){new v["a"](document.getElementById("external-events"),{itemSelector:".fc-event",eventData:function(e){var t=6e4*e.getAttribute("expectedMinute"),a=e.getAttribute("orderId"),r={title:e.innerText,duration:t,startEditable:!0,durationEditable:!1,extendedProps:{orderId:a}};return r}})}},computed:{despatchDataFilter:function(){var e=[];return this.despatchData.forEach((function(t){var a=t.DespatchDetails[0].Despatch.StartDate,r=t.DespatchDetails[0].OrderDetails.ExpectedMinute,n=b()(a).format("YYYY-MM-DDTHH:mm:ss.SSS"),s=b()(n).add(r,"minutes"),i={};i.start=n,i.resourceId=t.DespatchDetails[0].Despatch.CarId,i.duration=t.DespatchDetails[0].OrderDetails.ExpectedMinute,i.end=s._d,i.orderId=t.DespatchDetails[0].OrderDetails.Id,e.push(i)})),e},driverDataFilter:function(){var e=[];return this.driverData.forEach((function(t){var a={};a.driverId=t.DriverId,a.id=t.Id,a.title=t.CarNo,e.push(a)})),e}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getDespatch(),e.gerDriverInfo(),t.next=4,e.getOrder();case 4:e.setupDraggable();case 5:case"end":return t.stop()}}),t)})))()}},y=g,j=(a("ec61"),a("2877")),I=Object(j["a"])(y,i,o,!1,null,"198fd236",null),k=I.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"external-events"}},[e._m(0),e._l(e.orderData,(function(t,r){return a("div",{key:r,staticClass:"fc-event",attrs:{orderId:t.Id,title:t.CaseUserName,expectedMinute:t.ExpectedMinute,orderDetailId:t.Id}},[e._v(e._s(t.CaseUserName))])})),e._m(1)],2),a("div",{attrs:{id:"calendar"}}),a("button",{on:{click:e.createCalendar}},[e._v("creat")]),a("button",{on:{click:e.eventRender}},[e._v("render")])])},O=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("strong",[e._v("Draggable Events")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("input",{attrs:{type:"checkbox",id:"drop-remove"}}),a("label",{attrs:{for:"drop-remove"}},[e._v("remove after drop")])])}],x=a("589e"),T={data:function(){return{testToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoi5ris6Kmm55SoQuWWruS9jSIsImp0aSI6IjEwODMiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOlsiMzQiLCIzNCJdLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL2V4cGlyYXRpb24iOiIyMDIwLzQvMjEg5LiK5Y2IIDEwOjU1OjE3IiwibmJmIjoxNTg3NDM0MTE3LCJleHAiOjE1ODc0Mzc3MTcsImlzcyI6IkFzby5Db3JlIiwiYXVkIjoid3IifQ.88SNsdG4xrustxva393PtSLERtv2NSJuyq0zSrGe3C8",despatchData:"",driverData:"",orderData:"",addDespatchData:{DriverInfoId:"",CarId:"",StartDate:"",DespatchDetail:[{OrderDetailId:""}]}}},computed:{despatchDataFilter:function(){var e=[];return this.despatchData.forEach((function(t){var a=t.DespatchDetails[0].Despatch.StartDate,r=t.DespatchDetails[0].OrderDetails.ExpectedMinute,n=b()(a).format("YYYY-MM-DDTHH:mm:ss.SSS"),s=b()(n).add(r,"minutes"),i={};i.start=n,i.resourceId=t.DespatchDetails[0].Despatch.CarId,i.duration=t.DespatchDetails[0].OrderDetails.ExpectedMinute,i.end=s._d,i.orderId=t.DespatchDetails[0].OrderDetails.Id,e.push(i)})),e},driverDataFilter:function(){var e=[];return this.driverData.forEach((function(t){var a={};a.driverId=t.DriverId,a.id=t.Id,a.title=t.CarNo,e.push(a)})),e}},methods:{createCalendar:function(){var e=this;console.log("createCalendar");var t=document.getElementById("calendar"),a=new d["a"](t,{locale:"zh-tw",slotDuration:"00:05",contentHeight:800,minTime:"05:00:00",maxTime:"24:00:00",allDaySlot:!1,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",plugins:[l["b"],h["g"],f["e"],v["b"],u["a"]],eventDrop:function(e){console.log("更新派遣單",e)},drop:function(t){e.addDespatchData.DriverInfoId=t.resource.extendedProps.driverId,e.addDespatchData.CarId=t.resource.id,e.addDespatchData.StartDate=t.dateStr,e.addDespatchData.DespatchDetail[0].OrderDetailId=t.draggedEl.attributes.orderDetailId.value;var a=e.addDespatchData;console.log(a);var r={headers:{Authorization:" Bearer ".concat(e.testToken)}};e.$http.post("https://cors-anywhere.herokuapp.com/https://ntpcapi.1966.org.tw/api/Despatch/Post",a,r).then((function(e){console.log(e),t.draggedEl.parentNode.removeChild(t.draggedEl)}))},eventRender:this.eventRender,views:{resourceTimeGridFourDay:{type:"resourceTimeGrid",duration:{days:4},buttonText:"4 days"}},defaultView:"resourceTimeGridDay",datesAboveResources:!0,header:{left:"prev,next today",center:"title",right:"resourceTimeGridDay,resourceTimeGridFourDay"},resources:this.driverDataFilter,events:this.despatchDataFilter});a.render()},createDraggable:function(){new v["a"](document.getElementById("external-events"),{itemSelector:".fc-event",eventData:function(e){var t=6e4*e.getAttribute("expectedMinute"),a=e.getAttribute("orderId"),r={title:e.innerText,duration:t,startEditable:!0,durationEditable:!1,extendedProps:{orderId:a}};return r}})},getDespatch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$http.get("https://ntpcapi.1966.org.tw/api/Despatch/GetAllGroup?CompanyId=97&key=2020-04-20").then((function(e){console.log(e),a.despatchData=e.data.response})).catch((function(e){console.log("getDespatch err")}));case 3:case"end":return t.stop()}}),t)})))()},gerDriverInfo:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$http.get("https://ntpcapi.1966.org.tw/api/Cars/GetCarsWithCarTypeNoPage?compId=97&carType=0&isDescending=false").then((function(e){a.driverData=e.data.response,console.log(e)}));case 3:case"end":return t.stop()}}),t)})))()},getOrder:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r={headers:{Authorization:" Bearer ".concat(a.testToken)}},t.next=4,a.$http.get("https://ntpcapi.1966.org.tw/api/OrderDetails/GeOrderDetailtForDespatch/2020-04-20",r).then((function(e){console.log("getOrder",e),a.orderData=e.data.response}));case 4:case"end":return t.stop()}}),t)})))()},deleteDespatch:function(e){var t=this,a={headers:{Authorization:" Bearer ".concat(t.testToken)}};t.$http.delete("https://cors-anywhere.herokuapp.com/https://ntpcapi.1966.org.tw/api/Despatch/DeleteSubByODId?OrderDetailID=".concat(e),a).then((function(e){console.log(e)}))},eventRender:function(e){var t=this;e.el.addEventListener("click",(function(){var a=e.event.extendedProps.orderId;t.deleteDespatch(a),e.event.remove()}))}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,e.gerDriverInfo();case 3:return t.next=5,e.getDespatch();case 5:return t.next=7,e.getOrder();case 7:a.createCalendar(),a.createDraggable();case 9:case"end":return t.stop()}}),t)})))()}},R=T,C=(a("c369"),Object(j["a"])(R,w,O,!1,null,"07cdd4ab",null)),E=C.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"demo-app"},[a("div",{attrs:{id:"external-events"}},[e._m(0),e._l(e.orderData,(function(t,r){return a("div",{key:r,staticClass:"fc-event",attrs:{orderId:t.Id,title:t.CaseUserName,expectedMinute:t.ExpectedMinute,orderDetailId:t.Id}},[e._v(e._s(t.CaseUserName))])})),e._m(1)],2),a("div",{staticClass:"demo-app-top"},[e._v(" Start "),a("datetime",{attrs:{type:"datetime"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),a("br"),e._v("End "),a("datetime",{attrs:{type:"datetime"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}}),a("br"),e._v("Title "),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.titleDate,expression:"titleDate"}],attrs:{id:"dateTitle",type:"text"},domProps:{value:e.titleDate},on:{input:function(t){t.target.composing||(e.titleDate=t.target.value)}}}),a("br"),a("button",{on:{click:e.addEvent}},[e._v("送出")])],1),e.despatchDataFilter?a("FullCalendar",{ref:"fullCalendar",staticClass:"demo-app-calendar",attrs:{locale:"zh-tw",defaultView:"resourceTimelineDay",datesAboveResources:"true",views:this.views,slotDuration:"00:05",minTime:"05:00:00",maxTime:"24:00:00",allDaySlot:this.allDay,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",header:{left:"prev,next today",center:"title",right:"resourceTimelineDay,resourceTimelineWeek"},plugins:e.calendarPlugins,weekends:e.calendarWeekends,editable:this.editable,events:this.despatchDataFilter,resources:this.driverDataFilter},on:{eventRender:e.eventRender,eventDrop:e.eventDrop,drop:e.drop}}):e._e()],1)},N=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("strong",[e._v("Draggable Events")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("input",{attrs:{type:"checkbox",id:"drop-remove"}}),a("label",{attrs:{for:"drop-remove"}},[e._v("remove after drop")])])}],z=a("3d0a"),A={components:{FullCalendar:p["a"],Datetime:D["Datetime"]},data:function(){return{addDespatchData:{DriverInfoId:"",CarId:"",StartDate:"",DespatchDetail:[{OrderDetailId:""}]},testToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoi5ris6Kmm55SoQuWWruS9jSIsImp0aSI6IjEwODMiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOlsiMzQiLCIzNCJdLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL2V4cGlyYXRpb24iOiIyMDIwLzQvMjEg5LiK5Y2IIDEwOjU1OjE3IiwibmJmIjoxNTg3NDM0MTE3LCJleHAiOjE1ODc0Mzc3MTcsImlzcyI6IkFzby5Db3JlIiwiYXVkIjoid3IifQ.88SNsdG4xrustxva393PtSLERtv2NSJuyq0zSrGe3C8",editable:!1,allDay:!1,orderData:[],despatchData:[],driverData:[],views:{resourceTimeGridFourDay:{type:"resourceTimeGrid",duration:{days:4},buttonText:"4 days"}},date:"",titleDate:"",startDate:"2020-04-15",endDate:"",calendarPlugins:[z["a"],l["b"],h["g"],f["e"],v["b"],u["a"]],calendarWeekends:!0}},methods:{getDespatch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$http.get("https://ntpcapi.1966.org.tw/api/Despatch/GetAllGroup?CompanyId=97&key=2020-04-20").then((function(e){console.log(e),a.despatchData=e.data.response})).catch((function(e){console.log("getDespatch err")}));case 3:case"end":return t.stop()}}),t)})))()},gerDriverInfo:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$http.get("https://ntpcapi.1966.org.tw/api/Cars/GetCarsWithCarTypeNoPage?compId=97&carType=0&isDescending=false").then((function(e){a.driverData=e.data.response,console.log(e)}));case 3:case"end":return t.stop()}}),t)})))()},getOrder:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r={headers:{Authorization:" Bearer ".concat(a.testToken)}},t.next=4,a.$http.get("https://ntpcapi.1966.org.tw/api/OrderDetails/GeOrderDetailtForDespatch/2020-04-20",r).then((function(e){console.log("getOrder",e),a.orderData=e.data.response}));case 4:case"end":return t.stop()}}),t)})))()},toggleWeekends:function(){this.calendarWeekends=!this.calendarWeekends},gotoPast:function(){var e=this.$refs.fullCalendar.getApi();e.gotoDate("2000-01-01")},drop:function(e){var t=this;t.addDespatchData.DriverInfoId=e.resource.extendedProps.driverId,t.addDespatchData.CarId=e.resource.id,t.addDespatchData.StartDate=e.dateStr,t.addDespatchData.DespatchDetail[0].OrderDetailId=e.draggedEl.attributes.orderDetailId.value;var a=t.addDespatchData;console.log(a);var r={headers:{Authorization:" Bearer ".concat(t.testToken)}};t.$http.post("https://cors-anywhere.herokuapp.com/https://ntpcapi.1966.org.tw/api/Despatch/Post",a,r).then((function(e){console.log(e),t.getOrder()}))},eventDrop:function(e){console.log(e)},goToday:function(){var e=this.$refs.fullCalendar.getApi();e.today()},addEvent:function(){this.calendarEvents.push({title:this.titleDate,start:this.startDate,end:this.endDate})},eventRender:function(e){var t=this;e.el.addEventListener("click",(function(){var a=e.event.extendedProps.orderId;t.deleteDespatch(a),e.event.remove()}))},deleteDespatch:function(e){var t=this,a={headers:{Authorization:" Bearer ".concat(t.testToken)}};t.$http.delete("https://cors-anywhere.herokuapp.com/https://ntpcapi.1966.org.tw/api/Despatch/DeleteSubByODId?OrderDetailID=".concat(e),a).then((function(e){console.log(e),t.getOrder()}))},setupDraggable:function(){new v["a"](document.getElementById("external-events"),{itemSelector:".fc-event",eventData:function(e){var t=6e4*e.getAttribute("expectedMinute"),a=e.getAttribute("orderId"),r={title:e.innerText,duration:t,startEditable:!0,durationEditable:!1,extendedProps:{orderId:a}};return r}})}},computed:{despatchDataFilter:function(){var e=[];return this.despatchData.forEach((function(t){var a=t.DespatchDetails[0].Despatch.StartDate,r=t.DespatchDetails[0].OrderDetails.ExpectedMinute,n=b()(a).format("YYYY-MM-DDTHH:mm:ss.SSS"),s=b()(n).add(r,"minutes"),i={};i.start=n,i.resourceId=t.DespatchDetails[0].Despatch.CarId,i.duration=t.DespatchDetails[0].OrderDetails.ExpectedMinute,i.end=s._d,i.orderId=t.DespatchDetails[0].OrderDetails.Id,e.push(i)})),e},driverDataFilter:function(){var e=[];return this.driverData.forEach((function(t){var a={};a.driverId=t.DriverId,a.id=t.Id,a.title=t.CarNo,e.push(a)})),e}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getDespatch(),e.gerDriverInfo(),t.next=4,e.getOrder();case 4:e.setupDraggable();case 5:case"end":return t.stop()}}),t)})))()}},L=A,S=(a("6aa8"),Object(j["a"])(L,_,N,!1,null,"53f604f9",null)),M=S.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wzContainer"},[a("div",{staticClass:"checkBoxGroup"},[a("label",{attrs:{for:"All"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedNames,expression:"checkedNames"}],attrs:{value:"All",type:"radio",name:"All",id:"All"},domProps:{checked:e._q(e.checkedNames,"All")},on:{change:function(t){e.checkedNames="All"}}}),e._v("All ")]),a("label",{attrs:{for:"TypeA"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedNames,expression:"checkedNames"}],attrs:{value:"TypeA",type:"radio",name:"TypeA",id:"TypeA"},domProps:{checked:e._q(e.checkedNames,"TypeA")},on:{change:function(t){e.checkedNames="TypeA"}}}),e._v("TypeA ")]),a("label",{attrs:{for:"TypeB"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedNames,expression:"checkedNames"}],attrs:{value:"TypeB",type:"radio",name:"TypeA",id:"TypeB"},domProps:{checked:e._q(e.checkedNames,"TypeB")},on:{change:function(t){e.checkedNames="TypeB"}}}),e._v("TypeB ")]),a("label",{attrs:{for:"TypeC"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedNames,expression:"checkedNames"}],attrs:{value:"TypeC",type:"radio",name:"TypeA",id:"TypeC"},domProps:{checked:e._q(e.checkedNames,"TypeC")},on:{change:function(t){e.checkedNames="TypeC"}}}),e._v("TypeC ")]),a("label",{attrs:{for:"TypeD"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedNames,expression:"checkedNames"}],attrs:{value:"TypeD",type:"radio",name:"TypeA",id:"TypeD"},domProps:{checked:e._q(e.checkedNames,"TypeD")},on:{change:function(t){e.checkedNames="TypeD"}}}),e._v("TypeD ")])]),a("div",{staticClass:"wz"},[e.eventsFilter?a("FullCalendar",{ref:"fullCalendar",staticClass:"demo-app-calendar",attrs:{defaultDate:"2020-04-21",locale:"zh-tw",defaultView:"dayGridMonth",datesAboveResources:"true",allDaySlot:this.allDay,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},plugins:e.calendarPlugins,weekends:e.calendarWeekends,editable:this.editable,events:this.eventsFilter,eventColor:this.eventColor,aspectRatio:"2.2"},on:{eventRender:this.eventRender}}):e._e()],1)])},G=[],P=(a("4de4"),{components:{FullCalendar:p["a"]},data:function(){return{checkedNames:"All",eventColor:"#378006",editable:!1,allDay:!0,events:x,date:"",calendarPlugins:[l["b"],h["g"],f["e"],v["b"],u["a"]],calendarWeekends:!0}},methods:{eventRender:function(e){e.el.addEventListener("click",(function(){console.log(e)}))}},computed:{eventColorFilter:function(){var e=this,t=[];return e.events.forEach((function(e){"TypeA"===e.category?(e.color="#ff8787",t.push(e)):"TypeB"===e.category?(e.color="#108003",t.push(e)):"TypeC"===e.category?(e.color="#8790ff",t.push(e)):(e.color="#cb87ff",t.push(e))})),t},eventsFilter:function(){var e=this;if("All"===e.checkedNames)return e.eventColorFilter;var t=e.eventColorFilter.filter((function(t){return t.category===e.checkedNames}));return t}}}),B=P,Y=(a("c11a"),Object(j["a"])(B,W,G,!1,null,null,null)),F=Y.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gc"},[a("button",{on:{click:e.signIn}},[e._v("signIn")]),a("button",{on:{click:e.signOut}},[e._v("signOut")]),a("button",{on:{click:e.postEvent}},[e._v("post")]),a("button",{on:{click:e.aa}},[e._v("aa")]),e._v(" 1212 ")])},$=[],U=a("d43a"),H=a.n(U),Z={data:function(){return{isSignIn:this.$gAuth.isAuthorized,testToken:""}},methods:{aa:function(){console.log(H.a)},signIn:function(){var e=this;this.$gAuth.signIn().then((function(t){console.log("user",t),e.isSignIn=e.$gAuth.isAuthorized,e.testToken=t.tc.access_token})).catch((function(e){}))},signOut:function(){var e=this;this.$gAuth.signOut().then((function(){e.isSignIn=e.$gAuth.isAuthorized})).catch((function(e){}))},postEvent:function(){var e=this,t={headers:{Authorization:" Bearer ".concat(e.testToken),Accept:"application/json"}},a={end:{date:"2020-04-20"},start:{date:"2020-04-18"}};this.$http.post("https://content.googleapis.com/calendar/v3/calendars/primary/events?alt=json&key=AIzaSyCbZCjWSLPL3Vb_fd4ADMwVMpPhu-SRz40",a,t).then((function(e){console.log(e)}))}}},Q=Z,V=Object(j["a"])(Q,J,$,!1,null,null,null),X=V.exports,q={name:"App",components:{HelloWorld:k,Hello:E,Col:M,Wz:F,gc:X}},K=q,ee=Object(j["a"])(K,n,s,!1,null,null,null),te=ee.exports;a("d226"),a("c19f"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7");a("0fd4"),a("d226"),a("1447");var ae=a("bc3a"),re=a.n(ae),ne=a("a7fe"),se=a.n(ne),ie=a("c9bf"),oe=(a("d355"),{clientId:"287730103958-vqnr9k4vs3o2lfno9s63r16jacnaf0k0.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/calendar.events",prompt:"consent"});r["a"].use(ie["a"],oe),r["a"].use(D["Datetime"]),r["a"].use(se.a,re.a),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(te)}}).$mount("#app")},"589e":function(e){e.exports=JSON.parse('[{"title":"Conference","start":"2020-04-20","end":"2020-04-22","description":"description for All Day Event","category":"TypeA"},{"title":"Meeting","start":"2020-04-21T10:30:00+00:00","end":"2020-04-21T12:30:00+00:00","description":"description for All Day Event","category":"TypeB"},{"title":"Lunch","start":"2020-04-21T12:00:00+00:00","description":"description for All Day Event","category":"TypeC"},{"title":"Birthday Party","start":"2020-04-22T07:00:00+00:00","category":"TypeD"}]')},"62c3":function(e,t,a){},"6aa8":function(e,t,a){"use strict";var r=a("79fb"),n=a.n(r);n.a},"79fb":function(e,t,a){},"983f":function(e,t,a){},c11a:function(e,t,a){"use strict";var r=a("983f"),n=a.n(r);n.a},c369:function(e,t,a){"use strict";var r=a("e225"),n=a.n(r);n.a},d226:function(e,t,a){a("a15b"),a("fb6a"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("466d"),a("1276"),
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(a){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},r=function(e,t,a){this.data=e,this.size=e.length,this.type=t,this.encoding=a},n=a.prototype,s=r.prototype,i=e.FileReaderSync,o=function(e){this.code=this[this.name=e]},c="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),d=c.length,l=e.URL||e.webkitURL||e,u=l.createObjectURL,p=l.revokeObjectURL,h=l,f=e.btoa,v=e.atob,D=e.ArrayBuffer,m=e.Uint8Array;r.fake=s.fake=!0;while(d--)o.prototype[c[d]]=d+1;return l.createObjectURL||(h=e.URL={}),h.createObjectURL=function(e){var t,a=e.type;return null===a&&(a="application/octet-stream"),e instanceof r?(t="data:"+a,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):f?t+";base64,"+f(e.data):t+","+encodeURIComponent(e.data)):u?u.call(l,e):void 0},h.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&p&&p.call(l,e)},n.append=function(e){var a=this.data;if(m&&(e instanceof D||e instanceof m)){for(var n="",s=new m(e),c=0,d=s.length;c<d;c++)n+=String.fromCharCode(s[c]);a.push(n)}else if("Blob"===t(e)||"File"===t(e)){if(!i)throw new o("NOT_READABLE_ERR");var l=new i;a.push(l.readAsBinaryString(e))}else e instanceof r?"base64"===e.encoding&&v?a.push(v(e.data)):"URI"===e.encoding?a.push(decodeURIComponent(e.data)):"raw"===e.encoding&&a.push(e.data):("string"!==typeof e&&(e+=""),a.push(unescape(encodeURIComponent(e))))},n.getBlob=function(e){return arguments.length||(e=null),new r(this.data.join(""),e,"raw")},n.toString=function(){return"[object BlobBuilder]"},s.slice=function(e,t,a){var n=arguments.length;return n<3&&(a=null),new r(this.data.slice(e,n>1?t:this.data.length),a,this.encoding)},s.toString=function(){return"[object Blob]"},s.close=function(){this.size=this.data.length=0},a}(e);e.Blob=function(e,a){var r=a&&a.type||"",n=new t;if(e)for(var s=0,i=e.length;s<i;s++)n.append(e[s]);return n.getBlob(r)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this)},e225:function(e,t,a){},ec61:function(e,t,a){"use strict";var r=a("62c3"),n=a.n(r);n.a}});
//# sourceMappingURL=app.1fe30214.js.map